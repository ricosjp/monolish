<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>monolish: monolish data types</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">monolish
   &#160;<span id="projectnumber">0.14.0</span>
   </div>
   <div id="projectbrief">MONOlithic LIner equation Solvers for Highly-parallel architecture</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">monolish data types </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md10"></a>
Introduction</h1>
<p>In monolish, you can specify double or float as the template argument for each class.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Vector</h1>
<p><a class="el" href="../../d7/d15/classmonolish_1_1vector.html" title="vector class">monolish::vector</a> is a vector class like std::vector that can manage device memory of CPU and GPU.</p>
<p>Compared to std::vector, some functions commonly used in numerical computation are implemented.</p><ul>
<li>Random vector creation</li>
<li>Match all elements</li>
<li>Output of all elements to file or standard output</li>
</ul>
<p>We plan to implement all the features of std::vector in the future.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
view1D</h1>
<p><a class="el" href="../../d2/d67/classmonolish_1_1view1_d.html" title="1D view class">monolish::view1D</a> is a vector reference class with offset. It can be created from <a class="el" href="../../d7/d15/classmonolish_1_1vector.html" title="vector class">monolish::vector</a> or <a class="el" href="../../db/d46/classmonolish_1_1matrix_1_1_dense.html" title="Dense format Matrix.">monolish::matrix::Dense</a>.</p>
<p>Since view1D is not a hardcopy but a reference, it can extract a part of a vector or matrix without cost.</p>
<p>We plan to implement a 2D view class in the future.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
Matrix</h1>
<p>The implementation of the matrix storage format in monolish has several features.</p>
<p>The matrix format has the following two attributes:</p><ol type="1">
<li><code>editable</code></li>
<li><code>computable</code></li>
</ol>
<p>A matrix storage format with the <code>editable</code> attribute can reference and add matrix elements. A matrix storage format with the <code>computale</code> attribte can be used as an argument to a function for various operations.</p>
<p>In monolish, the Dense matrix is considered as one of the sparse matrix formats. Currently, there are four matrix storage formats available: Dense, COO, CRS, and LinearOperator. The attributes of each matrix storage format are shown below:</p><ul>
<li><a class="el" href="../../db/d46/classmonolish_1_1matrix_1_1_dense.html" title="Dense format Matrix.">monolish::matrix::Dense</a>: <code>editable and computable</code></li>
<li><a class="el" href="../../d0/d7e/classmonolish_1_1matrix_1_1_c_o_o.html" title="Coodinate (COO) format Matrix (need to sort)">monolish::matrix::COO</a>: <code>editable</code></li>
<li><a class="el" href="../../db/da5/classmonolish_1_1matrix_1_1_c_r_s.html" title="Compressed Row Storage (CRS) format Matrix.">monolish::matrix::CRS</a>: <code>computable</code></li>
<li><a class="el" href="../../dd/dfb/classmonolish_1_1matrix_1_1_linear_operator.html" title="Linear Operator imitating Matrix.">monolish::matrix::LinearOperator</a>: <code>computable</code> (special format)</li>
</ul>
<p>Matrices stored in COO format can be easily referenced, but the computation cannot be parallelized. COO does not have any attributes to compute.</p>
<p>The computation of matrices stored in CRS format can be parallelized efficiently. CRS does not have the <code>editable</code> attribute.</p>
<p>Matrices stored in the Dense format can be edited and computed efficiently; Dense has both attributes.</p>
<p>The LinearOperator format is a special format that can be created from all matrix storage formats, but it does not have an <code>editable</code> attribute. LinearOperator does not have all utility functions and does not support GPU.</p>
<p>Matrix storage formats belong to one of three attribute groups: <code>editable</code> / <code>computable</code> / <code>editable and computable</code>. when a new matrix storage format is implemented, all the matrices with the same attribute group will have the same functionality. For example, We will implement ELL, JAD, and other storage formats, it will be implemented as a class with <code>computable</code> attributes like CRS. (This is a beautiful implementation policy. But probably the policy will be broken....).</p>
<div class="image">
<img src="../../convert.png" alt=""/>
</div>
   <h2><a class="anchor" id="autotoc_md14"></a>
Matrix Util functions list</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">func </th><th class="markdownTableHeadNone">COO (editable) </th><th class="markdownTableHeadNone">Dense (editable/computable) </th><th class="markdownTableHeadNone">CRS (computable)  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">at </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">not impl.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">insert </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">not impl.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">row()/col()/diag() </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU/GPU </td><td class="markdownTableBodyNone">CPU/GPU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">type() </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">get_data_size() </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">get_row() / get_col() </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">print_all() </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">print_all(std::string file) </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU </td><td class="markdownTableBodyNone">CPU  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">send </td><td class="markdownTableBodyNone">don't support GPU </td><td class="markdownTableBodyNone">CPU/GPU </td><td class="markdownTableBodyNone">CPU/GPU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">recv </td><td class="markdownTableBodyNone">don't support GPU </td><td class="markdownTableBodyNone">CPU/GPU </td><td class="markdownTableBodyNone">CPU/GPU  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">nonfree_recv </td><td class="markdownTableBodyNone">don't support GPU </td><td class="markdownTableBodyNone">CPU/GPU </td><td class="markdownTableBodyNone">CPU/GPU  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">device_free </td><td class="markdownTableBodyNone">don't support GPU </td><td class="markdownTableBodyNone">CPU/GPU </td><td class="markdownTableBodyNone">CPU/GPU  </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md15"></a>
Storacture of matrix storage formats</h1>
<h2><a class="anchor" id="autotoc_md16"></a>
monolish::matrix::COO</h2>
<p><a class="el" href="../../d0/d7e/classmonolish_1_1matrix_1_1_c_o_o.html" title="Coodinate (COO) format Matrix (need to sort)">monolish::matrix::COO</a> uses following three arrays:</p><ul>
<li><code>val</code> is an array of length # of nonzeros, which stores the values of the nonzero elements.</li>
<li><code>row_index</code> is an array of length # of nonzeros, which stores the row numbers of the nonzero elements.</li>
<li><code>col_index</code> is an array of length # of nonzeros, which stores the column numbers of the nonzero elements.</li>
</ul>
<p>matrices stored in COO format do not guarantee that the data is sorted. When working with COO matrices, it is assumed that the data is not sorted.</p>
<p>You need to call <a class="el" href="../../d0/d7e/classmonolish_1_1matrix_1_1_c_o_o.html#a20d890720cddde2c525ba90e354e7390" title="sort COO matrix elements (and merge elements)">monolish::matrix::COO.sort()</a> function before converting it to convert other storage format.</p>
<div class="image">
<img src="../../COO.png" alt=""/>
</div>
   <h2><a class="anchor" id="autotoc_md17"></a>
monolish::matrix::CRS</h2>
<p><a class="el" href="../../db/da5/classmonolish_1_1matrix_1_1_c_r_s.html" title="Compressed Row Storage (CRS) format Matrix.">monolish::matrix::CRS</a> uses following three arrays:</p><ul>
<li><code>val</code> is an array of length # of nonzeros, which stores the nonzero elements of matrix A along the row.</li>
<li><code>col_ind</code> is an array of length # of nonzeros, which stores the column numbers of the nonzero elements stored in the array value.</li>
<li><code>row_ptr</code> is an array of length # of row + 1, which stores the starting points of the rows of the arrays value and index.</li>
</ul>
<p>CRS records the data structure as a hash value, so that the structure can be checked quickly during computation.</p>
<p>In case of direct manipulation of an array with CRS format, it can be recalculated using <a class="el" href="../../db/da5/classmonolish_1_1matrix_1_1_c_r_s.html#a51f6429a79285f6fedf268a207afc33f" title="compute index array hash (to compare structure)">monolish::matrix::CRS.compute_hash()</a> function.</p>
<div class="image">
<img src="../../CRS.png" alt=""/>
</div>
   <h2><a class="anchor" id="autotoc_md18"></a>
monolish::matrix::Dense</h2>
<p><a class="el" href="../../db/d46/classmonolish_1_1matrix_1_1_dense.html" title="Dense format Matrix.">monolish::matrix::Dense</a> uses following one array:</p><ul>
<li><code>val</code> is an array of length # of nonzeros (M*N).</li>
</ul>
<div class="image">
<img src="../../Dense.png" alt=""/>
</div>
   <h2><a class="anchor" id="autotoc_md19"></a>
monolish::matrix::LinearOperator</h2>
<p><a class="el" href="../../dd/dfb/classmonolish_1_1matrix_1_1_linear_operator.html" title="Linear Operator imitating Matrix.">monolish::matrix::LinearOperator</a> is a common interface for performing matrix vector products.</p>
<p>This class serves as an abstract interface between iterative solvers and matrix-like objects.</p>
<p>See the <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.LinearOperator.html">Scipy documentation</a> for more details </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
